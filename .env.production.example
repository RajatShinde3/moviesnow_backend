# MoviesNow Backend â€” Production Environment Template
#
# Copy this to your secret manager or deployment environment variables.
# Do NOT commit real values to your repository.

# ==== Runtime mode ====
ENV=production
ENABLE_HTTPS_REDIRECT=true

# Strong security headers for prod
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
REFERRER_POLICY=no-referrer
CROSS_ORIGIN_OPENER_POLICY=same-origin
CROSS_ORIGIN_RESOURCE_POLICY=same-origin
CROSS_ORIGIN_EMBEDDER_POLICY=require-corp

# Tight CSP (no inline/eval); add your CDN domains as needed
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'strict-dynamic'
CSP_STYLE_SRC='self'
CSP_IMG_SRC='self' data:
CSP_FONT_SRC='self' data:
CSP_CONNECT_SRC='self'
CSP_FRAME_ANCESTORS='none'

# Restrict to exact frontend origins (set to your domains)
FRONTEND_URL=https://app.example.com
FRONTEND_ORIGINS=https://app.example.com
ALLOW_ORIGINS_REGEX=

# ==== Postgres (required) ====
POSTGRES_SERVER=postgres
POSTGRES_PORT=5432
POSTGRES_USER=moviesnow
POSTGRES_PASSWORD=please_provide_via_secret
POSTGRES_DB=moviesnow

# ==== Redis (required) ====
REDIS_URL=redis://redis:6379/0

# ==== JWT / Secrets (required) ====
JWT_SECRET_KEY=please_provide_via_secret
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==== Rate Limiting (recommended) ====
RATE_LIMIT_ENABLED=true
DEFAULT_RATE_LIMIT=200/minute,5000/hour
RATELIMIT_STORAGE_URI=${REDIS_URL}
RATE_LIMIT_TRUSTED_IPS=
RATE_LIMIT_SKIP_PATHS=/health,/metrics,/openapi.json

# ==== Storage / CDN (optional) ====
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_BUCKET_NAME=
CLOUDFRONT_DOMAIN=

# ==== Email (optional) ====
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM="MoviesNow <noreply@example.com>"
EMAIL_STRICT_LOCAL=0
EMAIL_VERIFY_BASE_URL=https://app.example.com

# ==== Observability (optional) ====
SENTRY_DSN=

